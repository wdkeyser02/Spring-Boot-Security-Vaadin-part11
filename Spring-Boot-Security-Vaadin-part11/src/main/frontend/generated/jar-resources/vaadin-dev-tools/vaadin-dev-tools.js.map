{"version":3,"file":"vaadin-dev-tools.js","sources":["../../../../../../node_modules/tslib/tslib.es6.mjs","../../../../frontend/pre-trial-splash-screen.ts","../../../../frontend/License.ts","../../../../frontend/connection.ts","../../../../frontend/live-reload-connection.ts","../../../../frontend/websocket-connection.ts","../../../../frontend/vaadin-dev-tools.ts"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","import { ProductAndMessage, startPreTrial, tryAcquireLicense } from './License';\n\nclass PreTrial extends HTMLElement {\n  #parentObserver: MutationObserver | null;\n  #shadowRoot: ShadowRoot;\n  #trialExpired: boolean;\n  #startFailed: boolean | null;\n  #licenseDownloadStatus: string | null;\n  private remove: Function;\n\n  constructor() {\n    super();\n\n    this.#parentObserver = null;\n    this.#trialExpired = false;\n    this.#startFailed = null;\n    this.#licenseDownloadStatus = null;\n\n    // Create a shadow DOM for encapsulation\n    this.#shadowRoot = this.attachShadow({ mode: 'closed' });\n\n    // Initialize the component\n    this.render();\n    this.setupProtection();\n  }\n\n  // Define the observed attributes for the web component\n  static get observedAttributes(): string[] {\n    return ['expired', 'start-failure', 'license-download'];\n  }\n\n  private render(): void {\n    // Use template string for HTML structure\n    const commonStyles = `\n      <style>\n        :host {\n          position: fixed;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          z-index: 9999;\n          min-height: 100% !important;\n          min-width: 100% !important;\n          display: flex !important;\n          visibility: visible !important;\n          opacity: 1 !important;\n          clip-path: none !important;\n          text-indent: 0 !important;          \n          background-color: rgba(0, 0, 0, 0.5);          \n        }\n        \n        .container {\n          background: white;\n          border-radius: 0.5rem;\n          box-sizing: border-box;\n          color: #3f4d62;\n          font-family: \"nb_international_pro\",\"ui-sans-serif\",\"system-ui\",\"-apple-system\",\"BlinkMacSystemFont\",\"Segoe UI\",\"Roboto\",\"Helvetica Neue\",\"Arial\",\"Noto Sans\",\"sans-serif\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";\n          font-size: 0.875rem;\n          font-weight: normal;\n          letter-spacing: 0.01em;\n          line-height: 1.7;\n          margin: auto;\n          max-width: 32rem;\n          padding: 1.5rem 1.5rem 1rem 1.5rem;\n        }\n        \n        h2 {\n          color: #0d1219;\n          font-size: 1.5rem;\n          line-height: 1.2;\n          margin: 0 0 1rem 0;\n        }\n        \n        p {\n          margin: 0;\n        }\n        \n        span.badge {\n          background: #F1F5FB;\n          border-radius: 4px;\n          display: inline-block;\n          font-size: 0.8125rem;\n          font-weight: 600;\n          line-height: 1.7;\n          padding: 0 6px 0 4px;\n        }\n        \n        span.badge svg {\n          vertical-align: sub;\n        }\n        \n        p:has(+ ul) {\n          color: #0d1219;\n          font-weight: 600;\n          margin-top: 1.25rem;\n        }\n        \n        ul {\n          display: flex;\n          flex-direction: column;\n          gap: 0.5rem;\n          list-style: none;\n          margin: 0.5rem 0 1.5rem 0;\n          padding: 0;\n        }\n        \n        ul li {\n          align-items: center;\n          display: flex;\n          gap: 0.25rem;\n        }\n        \n        ul li span:first-of-type {\n          color: #0d1219;\n          font-weight: 600;\n        }\n        \n        hr {\n          border-color: rgb(224, 233, 244);\n          border-top: 0;\n          margin: 1.5rem 0 0.75rem 0;\n        }\n        \n        button {\n          align-items: center;\n          background: #F1F5FB;\n          border: none;\n          border-radius: 8px;\n          display: flex;\n          color: #0368DE;\n          font-family: \"nb_international_promono\",\"ui-monospace\",\"SFMono-Regular\",\"Menlo\",\"Monaco\",\"Consolas\",\"Liberation Mono\",\"Courier New\",\"monospace\";\n          font-size: inherit;\n          font-weight: 600;\n          height: 2.375rem;\n          justify-content: center;\n          line-height: 1.7;\n          padding: 0;\n          width: 100%;\n        }\n        \n        button.primary {\n          background: #0368DE;\n          color: white;\n          flex-direction: column;\n          height: 4.5rem;\n        }\n        \n        button.primary span + span {\n          font-size: 0.8125rem;\n          font-weight: normal;\n        }\n        \n        button.primary + button.secondary {\n          margin-top: 0.5rem;\n        }\n        \n        hr + p {\n          font-size: 0.8125rem;\n          line-height: 1.7;\n          text-align: center;\n        }\n        \n        a {\n          color: #0368DE;\n        }\n        \n        .error {\n          background: #ffedee;\n          border-radius: 0.75rem;\n          display: flex;\n          flex-direction: column;\n          gap: 0.25rem;\n          margin-top: 1.5rem;\n          padding: 1rem 1.5rem;\n        }\n        \n        .error h3 {\n          color: #0d1219;\n          font-size: inherit;\n          line-height: inherit;\n          margin: 0;\n        }\n        \n        .error a {\n          font-weight: 600;\n        }\n      </style>\n     `;\n\n    this.#shadowRoot.innerHTML = `\n    ${commonStyles}\n    <div class='container'>\n      ${\n        this.#trialExpired\n          ? `\n        <h2>Trial expired</h2>\n        <p>\n          Vaadin Core is free and open-source. Sign in to keep using \n          <span class=\"badge\">\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M3 15.75V12C3 11.5875 3.14687 11.2344 3.44062 10.9406C3.73437 10.6469 4.0875 10.5 4.5 10.5H13.5C13.9125 10.5 14.2656 10.6469 14.5594 10.9406C14.8531 11.2344 15 11.5875 15 12V15.75H3ZM6.75 9.75C5.7125 9.75 4.82812 9.38438 4.09687 8.65313C3.36562 7.92188 3 7.0375 3 6C3 4.9625 3.36562 4.07813 4.09687 3.34688C4.82812 2.61563 5.7125 2.25 6.75 2.25H11.25C12.2875 2.25 13.1719 2.61563 13.9031 3.34688C14.6344 4.07813 15 4.9625 15 6C15 7.0375 14.6344 7.92188 13.9031 8.65313C13.1719 9.38438 12.2875 9.75 11.25 9.75H6.75ZM4.5 14.25H13.5V12H4.5V14.25ZM6.75 8.25H11.25C11.875 8.25 12.4062 8.03125 12.8437 7.59375C13.2812 7.15625 13.5 6.625 13.5 6C13.5 5.375 13.2812 4.84375 12.8437 4.40625C12.4062 3.96875 11.875 3.75 11.25 3.75H6.75C6.125 3.75 5.59375 3.96875 5.15625 4.40625C4.71875 4.84375 4.5 5.375 4.5 6C4.5 6.625 4.71875 7.15625 5.15625 7.59375C5.59375 8.03125 6.125 8.25 6.75 8.25ZM6.75 6.75C6.9625 6.75 7.14062 6.67813 7.28437 6.53438C7.42812 6.39063 7.5 6.2125 7.5 6C7.5 5.7875 7.42812 5.60938 7.28437 5.46563C7.14062 5.32188 6.9625 5.25 6.75 5.25C6.5375 5.25 6.35937 5.32188 6.21562 5.46563C6.07187 5.60938 6 5.7875 6 6C6 6.2125 6.07187 6.39063 6.21562 6.53438C6.35937 6.67813 6.5375 6.75 6.75 6.75ZM11.25 6.75C11.4625 6.75 11.6406 6.67813 11.7844 6.53438C11.9281 6.39063 12 6.2125 12 6C12 5.7875 11.9281 5.60938 11.7844 5.46563C11.6406 5.32188 11.4625 5.25 11.25 5.25C11.0375 5.25 10.8594 5.32188 10.7156 5.46563C10.5719 5.60938 10.5 5.7875 10.5 6C10.5 6.2125 10.5719 6.39063 10.7156 6.53438C10.8594 6.67813 11.0375 6.75 11.25 6.75Z\" fill=\"url(#paint0_linear_85_182)\"/>\n            <defs>\n              <linearGradient id=\"paint0_linear_85_182\" x1=\"9\" y1=\"2.25\" x2=\"9\" y2=\"15.75\" gradientUnits=\"userSpaceOnUse\">\n                <stop stop-color=\"#1A81FA\"/>\n                <stop offset=\"1\" stop-color=\"#8854FC\"/>\n              </linearGradient>\n            </defs>\n          </svg>\n          Vaadin Copilot</span>,\n          <span class=\"badge\">\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12 15V9.75H15V15H12ZM7.5 15V3H10.5V15H7.5ZM3 15V6.75H6V15H3Z\" fill=\"url(#paint0_linear_85_186)\"/>\n              <defs>\n                <linearGradient id=\"paint0_linear_85_186\" x1=\"9\" y1=\"3\" x2=\"9\" y2=\"15\" gradientUnits=\"userSpaceOnUse\">\n                  <stop stop-color=\"#1A81FA\"/>\n                  <stop offset=\"1\" stop-color=\"#8854FC\"/>\n                </linearGradient>\n              </defs>\n            </svg>\n            Pro components\n          </span> and \n          <span class=\"badge\">\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M8.2125 11.6625L12.45 7.425L11.3812 6.35625L8.2125 9.525L6.6375 7.95L5.56875 9.01875L8.2125 11.6625ZM9 16.5C7.2625 16.0625 5.82812 15.0656 4.69687 13.5094C3.56562 11.9531 3 10.225 3 8.325V3.75L9 1.5L15 3.75V8.325C15 10.225 14.4344 11.9531 13.3031 13.5094C12.1719 15.0656 10.7375 16.0625 9 16.5ZM9 14.925C10.3 14.5125 11.375 13.6875 12.225 12.45C13.075 11.2125 13.5 9.8375 13.5 8.325V4.78125L9 3.09375L4.5 4.78125V8.325C4.5 9.8375 4.925 11.2125 5.775 12.45C6.625 13.6875 7.7 14.5125 9 14.925Z\" fill=\"url(#paint0_linear_85_190)\"/>\n              <defs>\n                <linearGradient id=\"paint0_linear_85_190\" x1=\"9\" y1=\"1.5\" x2=\"9\" y2=\"16.5\" gradientUnits=\"userSpaceOnUse\">\n                  <stop stop-color=\"#1A81FA\"/>\n                  <stop offset=\"1\" stop-color=\"#8854FC\"/>\n                </linearGradient>\n              </defs>\n            </svg>\n            Team features\n          </span> for 30 more days.\n        </p>\n        <p>Continue getting full access to:</p>\n        ${this.getProductsList()}\n        <button ${this.#licenseDownloadStatus === 'started' ? 'disabled' : ''} class='primary'>\n          <span>Extend trial 30 days</span>\n          <span>Sign up ⋅ No credit card required</span>\n        </button>\n        `\n          : `\n        <h2>Get full access to all features</h2>\n        <p>\n          Vaadin Core is free and open-source. To use Pro components like <span class=\"badge\">\n          <svg width=\"18\" height=\"18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M12 15V9.75h3V15h-3Zm-4.5 0V3h3v12h-3ZM3 15V6.75h3V15H3Z\" fill=\"url(#a)\"/>\n          <defs>\n            <linearGradient id=\"a\" x1=\"9\" y1=\"3\" x2=\"9\" y2=\"15\" gradientUnits=\"userSpaceOnUse\">\n              <stop stop-color=\"#1A81FA\"/>\n              <stop offset=\"1\" stop-color=\"#8854FC\"/>\n            </linearGradient>\n          </defs>\n        </svg>\n          Charts</span> in your app, activate a free trial.\n        </p>\n        <p>Get full access:</p>\n        ${this.getProductsList()}\n        <button ${this.#licenseDownloadStatus === 'started' ? 'disabled' : ''} class='primary'>\n          <span>Start 7-day trial</span>\n          <span>No registration or credit card required</span>\n        </button>\n        <button ${this.#licenseDownloadStatus === 'started' ? 'disabled' : ''} class='secondary'>\n          Activate your license\n        </button>\n        `\n      }\n      ${\n        this.#startFailed\n          ? `\n        <div class='error'>\n          <h3>Trial failed to start</h3>\n          <p>Something went wrong while starting your trial. Try again in a moment. If the issue persists, <a href=\"https://pages.vaadin.com/contact\" target=\"_blank\">contact our support team</a>.</p>\n        </div>`\n          : ''\n      }\n      ${\n        this.#licenseDownloadStatus === 'started'\n          ? '<p><strong>Waiting for the license key to be downloaded...</strong></p>'\n          : ''\n      }\n      ${\n        this.#licenseDownloadStatus === 'failed'\n          ? '<div class=\"error\">Failed to download the license key. Please try again later.</div>'\n          : ''\n      }\n      <hr>\n      <p>\n        By starting your trial, you agree to our <a href='https://vaadin.com/commercial-license-and-service-terms' target='_blank'>terms and conditions</a>.\n      </p>\n    </div>\n    `;\n\n    const primaryButton = this.#shadowRoot.querySelector('button.primary')!;\n    primaryButton?.addEventListener('click', () => {\n      this.dispatchEvent(\n        new CustomEvent('primary-button-click', {\n          detail: {\n            expired: this.#trialExpired\n          }\n        })\n      );\n    });\n    const secondaryButton = this.#shadowRoot.querySelector('button.secondary')!;\n    secondaryButton?.addEventListener('click', () => {\n      this.dispatchEvent(new CustomEvent('secondary-button-click'));\n    });\n  }\n\n  private getProductsList(): string {\n    return `\n        <ul>\n          <li>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\">\n            <path\n              d=\"M4 21v-5c0-.55.196-1.02.588-1.412A1.926 1.926 0 0 1 6 14h12c.55 0 1.02.196 1.413.588.391.391.587.862.587 1.412v5H4Zm5-8c-1.383 0-2.563-.488-3.537-1.463C4.487 10.563 4 9.383 4 8s.487-2.563 1.463-3.537C6.437 3.487 7.617 3 9 3h6c1.383 0 2.563.487 3.538 1.463C19.512 5.437 20 6.617 20 8s-.488 2.563-1.462 3.537C17.562 12.512 16.383 13 15 13H9Zm-3 6h12v-3H6v3Zm3-8h6c.833 0 1.542-.292 2.125-.875A2.893 2.893 0 0 0 18 8c0-.833-.292-1.542-.875-2.125A2.893 2.893 0 0 0 15 5H9c-.833 0-1.542.292-2.125.875A2.893 2.893 0 0 0 6 8c0 .833.292 1.542.875 2.125A2.893 2.893 0 0 0 9 11Zm0-2c.283 0 .52-.096.713-.287A.968.968 0 0 0 10 8a.968.968 0 0 0-.287-.713A.968.968 0 0 0 9 7a.968.968 0 0 0-.713.287A.968.968 0 0 0 8 8c0 .283.096.52.287.713.192.191.43.287.713.287Zm6 0c.283 0 .52-.096.713-.287A.967.967 0 0 0 16 8a.967.967 0 0 0-.287-.713A.968.968 0 0 0 15 7a.968.968 0 0 0-.713.287A.967.967 0 0 0 14 8c0 .283.096.52.287.713.192.191.43.287.713.287Z\"\n              fill=\"url(#a)\"\n            />\n            <defs>\n              <linearGradient\n                id=\"a\"\n                x1=\"12\"\n                y1=\"3\"\n                x2=\"12\"\n                y2=\"21\"\n                gradientUnits=\"userSpaceOnUse\"\n              >\n                <stop stop-color=\"#1A81FA\" />\n                <stop offset=\"1\" stop-color=\"#8854FC\" />\n              </linearGradient>\n            </defs>\n          </svg>\n            <span>Vaadin Copilot</span><span>⋅</span><span>AI-powered assistant for building UIs</span>\n          </li>\n          <li>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\">\n            <path\n              d=\"M16 20v-7h4v7h-4Zm-6 0V4h4v16h-4Zm-6 0V9h4v11H4Z\"\n              fill=\"url(#a)\"\n            />\n            <defs>\n              <linearGradient\n                id=\"a\"\n                x1=\"12\"\n                y1=\"4\"\n                x2=\"12\"\n                y2=\"20\"\n                gradientUnits=\"userSpaceOnUse\"\n              >\n                <stop stop-color=\"#1A81FA\" />\n                <stop offset=\"1\" stop-color=\"#8854FC\" />\n              </linearGradient>\n            </defs>\n          </svg>\n            <span>Pro components</span><span>⋅</span><span>Charts, Grid Pro, CRUD and more</span>\n          </li>\n          <li>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\">\n            <path\n              d=\"M10.95 15.55 16.6 9.9l-1.425-1.425L10.95 12.7l-2.1-2.1-1.425 1.425 3.525 3.525ZM12 22c-2.317-.583-4.23-1.913-5.737-3.988C4.754 15.938 4 13.633 4 11.1V5l8-3 8 3v6.1c0 2.533-.754 4.838-2.262 6.912C16.229 20.087 14.317 21.418 12 22Zm0-2.1c1.733-.55 3.167-1.65 4.3-3.3s1.7-3.483 1.7-5.5V6.375l-6-2.25-6 2.25V11.1c0 2.017.567 3.85 1.7 5.5s2.567 2.75 4.3 3.3Z\"\n              fill=\"url(#a)\"\n            />\n            <defs>\n              <linearGradient\n                id=\"a\"\n                x1=\"12\"\n                y1=\"2\"\n                x2=\"12\"\n                y2=\"22\"\n                gradientUnits=\"userSpaceOnUse\"\n              >\n                <stop stop-color=\"#1A81FA\" />\n                <stop offset=\"1\" stop-color=\"#8854FC\" />\n              </linearGradient>\n            </defs></svg\n          >\n            <span>Team features</span><span>⋅</span><span>Acceleration Kits</span>\n          </li>\n        </ul>\n    `;\n  }\n\n  connectedCallback(): void {\n    this.setupParentRemovalProtection();\n  }\n\n  disconnectedCallback(): void {\n    this.cleanup();\n  }\n\n  attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null): void {\n    if (name === 'expired') {\n      this.handleExpiredChange(newValue !== null && newValue !== 'false');\n    } else if (name === 'start-failure') {\n      this.handleStartFailed(newValue === 'expired');\n    } else if (name === 'license-download') {\n      this.handleLicenseDownload(newValue);\n    }\n  }\n\n  private handleLicenseDownload(value: string | null) {\n    if (this.#licenseDownloadStatus !== value) {\n      this.#licenseDownloadStatus = value;\n      this.render();\n    }\n  }\n\n  private handleExpiredChange(value: boolean) {\n    if (this.#trialExpired !== value) {\n      this.#trialExpired = value;\n      this.render();\n    }\n  }\n\n  private handleStartFailed(expired: boolean) {\n    if (this.#startFailed !== expired || this.#trialExpired !== expired) {\n      this.#trialExpired = expired;\n      this.#startFailed = true;\n      this.render();\n    }\n  }\n\n  private setupProtection(): void {\n    const originalRemove = Element.prototype.remove;\n    this.remove = function (this: PreTrial): void {\n      console.debug('Attempt to remove vaadin-pretrial detected - restoring');\n      const currentParent = this.parentNode;\n      // Let the removal happen\n      originalRemove.apply(this, arguments);\n      // Re-add the component\n      this.restoreSplashScreen(currentParent as Node);\n    };\n\n    // Protect against style changes\n    this.protectStyles();\n  }\n\n  private setupParentRemovalProtection(): void {\n    // Protect against removal from parent\n    if (!this.#parentObserver && this.parentNode) {\n      this.#parentObserver = new MutationObserver((mutations: MutationRecord[]) => {\n        mutations.forEach((mutation: MutationRecord) => {\n          if (mutation.type === 'childList') {\n            mutation.removedNodes.forEach((node: Node) => {\n              if (node === this) {\n                console.debug('vaadin-pretrial removal detected - restoring');\n                this.restoreSplashScreen(mutation.target);\n              }\n            });\n          }\n        });\n      });\n\n      this.#parentObserver.observe(this.parentNode, {\n        childList: true,\n        subtree: true\n      });\n    }\n  }\n\n  private protectStyles(): void {\n    // Override style setters\n    Object.defineProperty(this, 'style', {\n      get(): object {\n        // return an empty object to prevent programmatic changes\n        return {};\n      },\n      set(_value: CSSStyleDeclaration): void {\n        // prevent setting regular style object\n      }\n    });\n  }\n\n  private cleanup(): void {\n    if (this.#parentObserver) {\n      this.#parentObserver.disconnect();\n    }\n  }\n\n  private restoreSplashScreen(maybeParentNode: Node | null): void {\n    // Re-add the component if it's removed\n    if (!maybeParentNode) {\n      // Splash screen component not yet attached\n      return;\n    }\n    setTimeout(() => {\n      console.debug('Re-adding vaadin-pretrial component');\n      const products = this.querySelector('[slot=\"products\"]');\n      if ((maybeParentNode as ParentNode).contains(this)) {\n        (maybeParentNode as Node).removeChild(this);\n      }\n      const splashScreen = document.createElement('vaadin-pretrial');\n      if (this.#trialExpired) {\n        splashScreen.setAttribute('expired', 'true');\n      }\n      if (this.#startFailed) {\n        splashScreen.setAttribute('start-failure', this.#trialExpired ? 'expired' : '');\n      }\n      if (products) {\n        splashScreen.appendChild(products.cloneNode(true));\n      }\n      (maybeParentNode as Element).appendChild(splashScreen);\n    }, 0);\n  }\n}\n\n// Register the custom element\ncustomElements.define('vaadin-pretrial', PreTrial);\n\nfunction primaryButtonClickListener(event: CustomEvent) {\n  if (event.detail.expired) {\n    tryAcquireLicense();\n  } else {\n    startPreTrial();\n  }\n}\n\nfunction secondaryButtonClickListener() {\n  tryAcquireLicense();\n}\n\nexport const showPreTrialSplashScreen = (shadowRoot: ShadowRoot | null, message: ProductAndMessage) => {\n  if (shadowRoot && !shadowRoot.querySelector('vaadin-pretrial')) {\n    const expiredPreTrial = message.preTrial?.trialState === 'EXPIRED';\n    const preTrialElement = document.createElement('vaadin-pretrial');\n    if (expiredPreTrial) {\n      preTrialElement.setAttribute('expired', '');\n    }\n    const productsDiv = document.createElement('div');\n    productsDiv.setAttribute('slot', 'products');\n    productsDiv.innerHTML = `\n      This application is using:\n      <ul>\n        <li>${message.product.name}</li>\n      </ul>\n    `;\n    preTrialElement.appendChild(productsDiv);\n\n    preTrialElement.addEventListener('secondary-button-click', secondaryButtonClickListener as EventListener);\n    preTrialElement.addEventListener('primary-button-click', primaryButtonClickListener as EventListener);\n\n    shadowRoot.innerHTML = `<slot></slot>`;\n    shadowRoot.appendChild(preTrialElement);\n  }\n};\nexport const preTrialStartFailed = (expired: boolean, shadowRoot: ShadowRoot | null) => {\n  if (shadowRoot) {\n    const element = shadowRoot.querySelector('vaadin-pretrial');\n    element?.setAttribute('start-failure', expired ? 'expired' : '');\n  }\n};\nexport const updateLicenseDownloadStatus = (\n  action: 'started' | 'failed' | 'completed',\n  shadowRoot: ShadowRoot | null\n) => {\n  if (shadowRoot) {\n    const element = shadowRoot.querySelector('vaadin-pretrial');\n    element?.setAttribute('license-download', action);\n  }\n};\n","import { ServerMessage } from './vaadin-dev-tools';\nimport { preTrialStartFailed, showPreTrialSplashScreen, updateLicenseDownloadStatus } from './pre-trial-splash-screen';\n\nconst noLicenseFallbackTimeout = 1000;\n\nexport interface Product {\n  name: string;\n  version: string;\n}\n\nexport interface PreTrial {\n  trialName?: String;\n  trialState: String;\n  daysRemaining?: number;\n  daysRemainingUntilRenewal?: number;\n}\n\nexport interface ProductAndMessage {\n  message: string;\n  messageHtml?: string;\n  product: Product;\n  preTrial?: PreTrial;\n}\n\nexport const findAll = (element: Element | ShadowRoot | Document, tags: string[]): Element[] => {\n  const lightDom = Array.from(element.querySelectorAll(tags.join(', ')));\n  const shadowDom = Array.from(element.querySelectorAll('*'))\n    .filter((e) => e.shadowRoot)\n    .flatMap((e) => findAll(e.shadowRoot!, tags));\n  return [...lightDom, ...shadowDom];\n};\n\nlet licenseCheckListener = false;\n\nconst showNoLicenseFallback = (element: Element, productAndMessage: ProductAndMessage) => {\n  if (!licenseCheckListener) {\n    // When a license check has succeeded, refresh so that all elements are properly shown again\n    window.addEventListener(\n      'message',\n      (e) => {\n        if (e.data === 'validate-license') {\n          window.location.reload();\n        }\n      },\n      false\n    );\n    licenseCheckListener = true;\n  }\n  const overlay = (element as any)._overlayElement;\n  if (overlay) {\n    if (overlay.shadowRoot) {\n      const defaultSlot = overlay.shadowRoot.querySelector('slot:not([name])');\n      if (defaultSlot && defaultSlot.assignedElements().length > 0) {\n        showNoLicenseFallback(defaultSlot.assignedElements()[0], productAndMessage);\n        return;\n      }\n    }\n    showNoLicenseFallback(overlay, productAndMessage);\n    return;\n  }\n\n  const htmlMessage = productAndMessage.messageHtml\n    ? productAndMessage.messageHtml\n    : `${productAndMessage.message} <p>Component: ${productAndMessage.product.name} ${productAndMessage.product.version}</p>`.replace(\n        /https:([^ ]*)/g,\n        \"<a href='https:$1'>https:$1</a>\"\n      );\n\n  if (element.isConnected) {\n    element.outerHTML = `<no-license style=\"display:flex;align-items:center;text-align:center;justify-content:center;\"><div>${htmlMessage}</div></no-license>`;\n  }\n};\n\nconst productTagNames: Record<string, string[]> = {};\nconst productChecking: Record<string, boolean> = {};\nconst productMissingLicense: Record<string, ProductAndMessage> = {};\nconst productCheckOk: Record<string, boolean> = {};\n\nconst key = (product: Product): string => {\n  return `${product.name}_${product.version}`;\n};\n\nconst checkLicenseIfNeeded = (cvdlElement: Element) => {\n  const { cvdlName, version } = cvdlElement.constructor as CustomElementConstructor & {\n    cvdlName: string;\n    version: string;\n  };\n  const product: Product = { name: cvdlName, version };\n  const tagName = cvdlElement.tagName.toLowerCase();\n  productTagNames[cvdlName] = productTagNames[cvdlName] ?? [];\n  productTagNames[cvdlName].push(tagName);\n\n  const failedLicenseCheck = productMissingLicense[key(product)];\n  if (failedLicenseCheck) {\n    // Has been checked and the check failed\n    setTimeout(() => showNoLicenseFallback(cvdlElement, failedLicenseCheck), noLicenseFallbackTimeout);\n  }\n\n  if (productMissingLicense[key(product)] || productCheckOk[key(product)]) {\n    // Already checked\n  } else if (!productChecking[key(product)]) {\n    // Has not been checked\n    productChecking[key(product)] = true;\n    (window as any).Vaadin.devTools.checkLicense(product);\n  }\n};\n\nexport const licenseCheckOk = (data: Product) => {\n  productCheckOk[key(data)] = true;\n\n  // eslint-disable-next-line no-console\n  console.debug('License check ok for', data);\n};\n\nexport const licenseCheckFailed = (data: ProductAndMessage) => {\n  const productName = data.product.name;\n  productMissingLicense[key(data.product)] = data;\n  // eslint-disable-next-line no-console\n  console.error('License check failed for', productName);\n\n  const tags = productTagNames[productName];\n  if (tags?.length > 0) {\n    findAll(document, tags).forEach((element) => {\n      setTimeout(\n        () => showNoLicenseFallback(element, productMissingLicense[key(data.product)]),\n        noLicenseFallbackTimeout\n      );\n    });\n  }\n};\n\nexport const licenseCheckNoKey = (data: ProductAndMessage) => {\n  const keyUrl = data.message;\n\n  const productName = data.product.name;\n  data.messageHtml = `No license found. <a target=_blank onclick=\"javascript:window.open(this.href);return false;\" href=\"${keyUrl}\">Go here to start a trial or retrieve your license.</a>`;\n  productMissingLicense[key(data.product)] = data;\n  // eslint-disable-next-line no-console\n  console.error('No license found when checking', productName);\n\n  const tags = productTagNames[productName];\n  if (tags?.length > 0) {\n    findAll(document, tags).forEach((element) => {\n      setTimeout(\n        () => showNoLicenseFallback(element, productMissingLicense[key(data.product)]),\n        noLicenseFallbackTimeout\n      );\n    });\n  }\n};\n\nexport const handleLicenseMessage = (message: ServerMessage, bodyShadowRoot: ShadowRoot | null): boolean => {\n  if (message.command === 'license-check-ok') {\n    licenseCheckOk(message.data);\n    return true;\n  } else if (message.command === 'license-check-failed') {\n    licenseCheckFailed(message.data);\n    return true;\n  } else if (message.command === 'license-check-nokey') {\n    showPreTrialSplashScreen(bodyShadowRoot, message.data);\n    licenseCheckNoKey(message.data);\n    return true;\n  } else if (message.command === 'license-pretrial-started') {\n    console.debug('Pre-trial period started', message.data);\n    window.location.reload();\n    return true;\n  } else if (message.command === 'license-pretrial-expired') {\n    console.debug('Pre-trial period expired', message.data);\n    preTrialStartFailed(true, bodyShadowRoot);\n    return true;\n  } else if (message.command === 'license-pretrial-failed') {\n    console.debug('Pre-trial period start failed', message.data);\n    preTrialStartFailed(false, bodyShadowRoot);\n    return true;\n  } else if (message.command === 'license-download-completed') {\n    console.debug('License downloaded');\n    window.location.reload();\n    return true;\n  } else if (message.command === 'license-download-started') {\n    updateLicenseDownloadStatus('started', bodyShadowRoot);\n    return true;\n  } else if (message.command === 'license-download-failed') {\n    updateLicenseDownloadStatus('failed', bodyShadowRoot);\n    return true;\n  }\n  return false;\n};\n\nexport const startPreTrial = () => {\n  (window as any).Vaadin.devTools.startPreTrial();\n};\nexport const tryAcquireLicense = () => {\n  const products = Object.values(productMissingLicense);\n  if (products.length > 0) {\n    (window as any).Vaadin.devTools.downloadLicense(products[0].product);\n  }\n};\n\nexport const licenseInit = () => {\n  // Process already registered elements\n  (window as any).Vaadin.devTools.createdCvdlElements.forEach((element: Element) => {\n    checkLicenseIfNeeded(element);\n  });\n\n  // Handle new elements directly\n  (window as any).Vaadin.devTools.createdCvdlElements = {\n    push: (element: Element) => {\n      checkLicenseIfNeeded(element);\n    }\n  };\n};\n","export enum ConnectionStatus {\n  ACTIVE = 'active',\n  INACTIVE = 'inactive',\n  UNAVAILABLE = 'unavailable',\n  ERROR = 'error'\n}\n\nexport abstract class Connection {\n  static HEARTBEAT_INTERVAL = 180000;\n\n  status: ConnectionStatus = ConnectionStatus.UNAVAILABLE;\n  onHandshake() {\n    // Intentionally empty\n  }\n\n  onConnectionError(_: string) {\n    // Intentionally empty\n  }\n\n  onStatusChange(_: ConnectionStatus) {\n    // Intentionally empty\n  }\n\n  setActive(yes: boolean) {\n    if (!yes && this.status === ConnectionStatus.ACTIVE) {\n      this.setStatus(ConnectionStatus.INACTIVE);\n    } else if (yes && this.status === ConnectionStatus.INACTIVE) {\n      this.setStatus(ConnectionStatus.ACTIVE);\n    }\n  }\n\n  setStatus(status: ConnectionStatus) {\n    if (this.status !== status) {\n      this.status = status;\n      this.onStatusChange(status);\n    }\n  }\n}\n","import { Connection, ConnectionStatus } from './connection.js';\n\nexport class LiveReloadConnection extends Connection {\n  webSocket?: WebSocket;\n\n  constructor(url: string) {\n    super();\n    this.webSocket = new WebSocket(url);\n    this.webSocket.onmessage = (msg) => this.handleMessage(msg);\n    this.webSocket.onerror = (err) => this.handleError(err);\n    this.webSocket.onclose = (_) => {\n      if (this.status !== ConnectionStatus.ERROR) {\n        this.setStatus(ConnectionStatus.UNAVAILABLE);\n      }\n      this.webSocket = undefined;\n    };\n\n    setInterval(() => {\n      if (this.webSocket && self.status !== ConnectionStatus.ERROR && this.status !== ConnectionStatus.UNAVAILABLE) {\n        this.webSocket.send('');\n      }\n    }, Connection.HEARTBEAT_INTERVAL);\n  }\n\n  onReload(_strategy: string) {\n    // Intentionally empty\n  }\n\n  handleMessage(msg: any) {\n    let json;\n\n    try {\n      json = JSON.parse(msg.data);\n    } catch (e: any) {\n      this.handleError(`[${e.name}: ${e.message}`);\n      return;\n    }\n    if (json.command === 'hello') {\n      this.setStatus(ConnectionStatus.ACTIVE);\n      this.onHandshake();\n    } else if (json.command === 'reload') {\n      if (this.status === ConnectionStatus.ACTIVE) {\n        const strategy = json.strategy || 'reload';\n        this.onReload(strategy);\n      }\n    } else {\n      this.handleError(`Unknown message from the livereload server: ${msg}`);\n    }\n  }\n\n  handleError(msg: any) {\n    // eslint-disable-next-line no-console\n    console.error(msg);\n    this.setStatus(ConnectionStatus.ERROR);\n    if (msg instanceof Event && this.webSocket) {\n      this.onConnectionError(`Error in WebSocket connection to ${this.webSocket.url}`);\n    } else {\n      this.onConnectionError(msg);\n    }\n  }\n}\n","import { Connection, ConnectionStatus } from './connection';\n\nconst WEBSOCKET_FRAGMENT_SIZE = 16384; // This is PushConstants.WEBSOCKET_FRAGMENT_SIZE\n\nexport class WebSocketConnection extends Connection {\n  static HEARTBEAT_INTERVAL = 180000;\n\n  socket?: any;\n  canSend = false;\n\n  constructor(url: string) {\n    super();\n    if (!url) {\n      return;\n    }\n\n    const config = {\n      transport: 'websocket',\n      fallbackTransport: 'websocket',\n      url,\n      contentType: 'application/json; charset=UTF-8',\n      reconnectInterval: 5000,\n      timeout: -1,\n      maxReconnectOnClose: 10000000,\n      trackMessageLength: true,\n      enableProtocol: true,\n      handleOnlineOffline: false,\n      executeCallbackBeforeReconnect: true,\n      messageDelimiter: '|',\n      onMessage: (response: any) => {\n        const message = { data: response.responseBody };\n        this.handleMessage(message);\n      },\n      onError: (response: any) => {\n        this.canSend = false;\n        this.handleError(response);\n      },\n      onOpen: () => {\n        this.canSend = true;\n      },\n      onClose: () => {\n        this.canSend = false;\n      },\n      onClientTimeout: () => {\n        this.canSend = false;\n      },\n      onReconnect: () => {\n        this.canSend = false;\n      },\n      onReopen: () => {\n        this.canSend = true;\n      }\n    };\n\n    waitForPush().then((atmosphere) => {\n      this.socket = atmosphere.subscribe(config);\n    });\n  }\n\n  onReload(_strategy: string) {\n    // Intentionally empty\n  }\n\n  onUpdate(_path: string, _content: string) {\n    // Intentionally empty\n  }\n\n  onMessage(_message: any) {}\n\n  handleMessage(msg: any) {\n    let json;\n\n    try {\n      json = JSON.parse(msg.data);\n    } catch (e: any) {\n      this.handleError(`[${e.name}: ${e.message}`);\n      return;\n    }\n    if (json.command === 'hello') {\n      this.setStatus(ConnectionStatus.ACTIVE);\n      this.onHandshake();\n    } else if (json.command === 'reload') {\n      if (this.status === ConnectionStatus.ACTIVE) {\n        const strategy = json.strategy || 'reload';\n        this.onReload(strategy);\n      }\n    } else if (json.command === 'update') {\n      if (this.status === ConnectionStatus.ACTIVE) {\n        this.onUpdate(json.path, json.content);\n      }\n    } else {\n      this.onMessage(json);\n    }\n  }\n\n  handleError(msg: any) {\n    // eslint-disable-next-line no-console\n    console.error(msg);\n    this.setStatus(ConnectionStatus.ERROR);\n    this.onConnectionError(msg);\n  }\n\n  public send(command: string, data: any) {\n    if (!this.socket || !this.canSend) {\n      waitFor(\n        () => this.socket && this.canSend,\n        (_atmosphere) => this.send(command, data)\n      );\n      return;\n    }\n\n    const message = JSON.stringify({ command, data });\n    const payload = message.length + '|' + message;\n\n    let remaining = payload;\n    while (remaining.length) {\n      this.socket.push(remaining.substring(0, WEBSOCKET_FRAGMENT_SIZE));\n      remaining = remaining.substring(WEBSOCKET_FRAGMENT_SIZE);\n    }\n  }\n}\n\nfunction waitFor<T>(check: () => T | undefined, callback: (value: T) => void) {\n  const value = check();\n  if (value) {\n    callback(value);\n  } else {\n    setTimeout(() => waitFor(check, callback), 50);\n  }\n}\n\nfunction waitForPush(): Promise<any> {\n  // Wait for window.vaadinPush.atmosphere to be defined and return it\n  return new Promise<any>((resolve, _reject) => {\n    waitFor(() => (window as any)?.vaadinPush?.atmosphere, resolve);\n  });\n}\n","import { css, html, LitElement } from 'lit';\nimport { customElement, property, query, state } from 'lit/decorators.js';\nimport { handleLicenseMessage, licenseCheckOk, licenseInit, Product } from './License';\nimport { ConnectionStatus } from './connection';\nimport { LiveReloadConnection } from './live-reload-connection';\nimport { WebSocketConnection } from './websocket-connection';\nimport { preTrialStartFailed, updateLicenseDownloadStatus } from './pre-trial-splash-screen';\n\n/**\n * Plugin API for the dev tools window.\n */\nexport interface DevToolsInterface {\n  send(command: string, data: any): void;\n}\n\nexport interface MessageHandler {\n  handleMessage(message: ServerMessage): boolean;\n}\n\nexport interface ServerMessage {\n  /**\n   * The command\n   */\n  command: string;\n  /**\n   * the data for the command\n   */\n  data: any;\n}\n\n/**\n * To create and register a plugin, use e.g.\n * @example\n * export class MyTab extends LitElement implements MessageHandler {\n *   render() {\n *     return html`<div>Here I am</div>`;\n *   }\n * }\n * customElements.define('my-tab', MyTab);\n *\n * const plugin: DevToolsPlugin = {\n *   init: function (devToolsInterface: DevToolsInterface): void {\n *     devToolsInterface.addTab('Tab title', 'my-tab')\n *   }\n * };\n *\n * (window as any).Vaadin.devToolsPlugins.push(plugin);\n */\nexport interface DevToolsPlugin {\n  /**\n   * Called once to initialize the plugin.\n   *\n   * @param devToolsInterface provides methods to interact with the dev tools\n   */\n  init(devToolsInterface: DevToolsInterface): void;\n}\n\nexport enum MessageType {\n  LOG = 'log',\n  INFORMATION = 'information',\n  WARNING = 'warning',\n  ERROR = 'error'\n}\n\ninterface Message {\n  id: number;\n  type: MessageType;\n  message: string;\n  details?: string;\n  link?: string;\n  persistentId?: string;\n  dontShowAgain: boolean;\n  dontShowAgainMessage?: string;\n  deleted: boolean;\n}\n\ntype DevToolsConf = {\n  enable: boolean;\n  url: string;\n  contextRelativePath: string;\n  backend?: string;\n  liveReloadPort?: number;\n  token?: string;\n};\n\n// @ts-ignore\nconst hmrClient: any = import.meta.hot ? import.meta.hot.hmrClient : undefined;\n\n@customElement('vaadin-dev-tools')\nexport class VaadinDevTools extends LitElement {\n  unhandledMessages: ServerMessage[] = [];\n  conf: DevToolsConf = { enable: false, url: '', contextRelativePath: '', liveReloadPort: -1 };\n  bodyShadowRoot: ShadowRoot | null = null;\n\n  static get styles() {\n    return [\n      css`\n        :host {\n          --dev-tools-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell,\n            'Helvetica Neue', sans-serif;\n          --dev-tools-font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',\n            monospace;\n\n          --dev-tools-font-size: 0.8125rem;\n          --dev-tools-font-size-small: 0.75rem;\n\n          --dev-tools-text-color: rgba(255, 255, 255, 0.8);\n          --dev-tools-text-color-secondary: rgba(255, 255, 255, 0.65);\n          --dev-tools-text-color-emphasis: rgba(255, 255, 255, 0.95);\n          --dev-tools-text-color-active: rgba(255, 255, 255, 1);\n\n          --dev-tools-background-color-inactive: rgba(45, 45, 45, 0.25);\n          --dev-tools-background-color-active: rgba(45, 45, 45, 0.98);\n          --dev-tools-background-color-active-blurred: rgba(45, 45, 45, 0.85);\n\n          --dev-tools-border-radius: 0.5rem;\n          --dev-tools-box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.05), 0 4px 12px -2px rgba(0, 0, 0, 0.4);\n\n          --dev-tools-blue-hsl: 206, 100%, 70%;\n          --dev-tools-blue-color: hsl(var(--dev-tools-blue-hsl));\n          --dev-tools-green-hsl: 145, 80%, 42%;\n          --dev-tools-green-color: hsl(var(--dev-tools-green-hsl));\n          --dev-tools-grey-hsl: 0, 0%, 50%;\n          --dev-tools-grey-color: hsl(var(--dev-tools-grey-hsl));\n          --dev-tools-yellow-hsl: 38, 98%, 64%;\n          --dev-tools-yellow-color: hsl(var(--dev-tools-yellow-hsl));\n          --dev-tools-red-hsl: 355, 100%, 68%;\n          --dev-tools-red-color: hsl(var(--dev-tools-red-hsl));\n\n          /* Needs to be in ms, used in JavaScript as well */\n          --dev-tools-transition-duration: 180ms;\n\n          all: initial;\n\n          direction: ltr;\n          cursor: default;\n          font: normal 400 var(--dev-tools-font-size) / 1.125rem var(--dev-tools-font-family);\n          color: var(--dev-tools-text-color);\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          user-select: none;\n          color-scheme: dark;\n\n          position: fixed;\n          z-index: 20000;\n          pointer-events: none;\n          bottom: 0;\n          right: 0;\n          width: 100%;\n          height: 100%;\n          display: flex;\n          flex-direction: column-reverse;\n          align-items: flex-end;\n        }\n\n        .dev-tools {\n          pointer-events: auto;\n          display: flex;\n          align-items: center;\n          position: fixed;\n          z-index: inherit;\n          right: 0.5rem;\n          bottom: 0.5rem;\n          min-width: 1.75rem;\n          height: 1.75rem;\n          max-width: 1.75rem;\n          border-radius: 0.5rem;\n          padding: 0.375rem;\n          box-sizing: border-box;\n          background-color: var(--dev-tools-background-color-inactive);\n          box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.05);\n          color: var(--dev-tools-text-color);\n          transition: var(--dev-tools-transition-duration);\n          white-space: nowrap;\n          line-height: 1rem;\n        }\n\n        .dev-tools:hover,\n        .dev-tools.active {\n          background-color: var(--dev-tools-background-color-active);\n          box-shadow: var(--dev-tools-box-shadow);\n        }\n\n        .dev-tools.active {\n          max-width: calc(100% - 1rem);\n        }\n\n        .dev-tools .status-description {\n          overflow: hidden;\n          text-overflow: ellipsis;\n          padding: 0 0.25rem;\n        }\n\n        .dev-tools.error {\n          background-color: hsla(var(--dev-tools-red-hsl), 0.15);\n          animation: bounce 0.5s;\n          animation-iteration-count: 2;\n        }\n\n        .window.hidden {\n          opacity: 0;\n          transform: scale(0);\n          position: absolute;\n        }\n\n        .window.visible {\n          transform: none;\n          opacity: 1;\n          pointer-events: auto;\n        }\n\n        .window.visible ~ .dev-tools {\n          opacity: 0;\n          pointer-events: none;\n        }\n\n        .window.visible ~ .dev-tools .dev-tools-icon,\n        .window.visible ~ .dev-tools .status-blip {\n          transition: none;\n          opacity: 0;\n        }\n\n        .window {\n          border-radius: var(--dev-tools-border-radius);\n          overflow: auto;\n          margin: 0.5rem;\n          min-width: 30rem;\n          max-width: calc(100% - 1rem);\n          max-height: calc(100vh - 1rem);\n          flex-shrink: 1;\n          background-color: var(--dev-tools-background-color-active);\n          color: var(--dev-tools-text-color);\n          transition: var(--dev-tools-transition-duration);\n          transform-origin: bottom right;\n          display: flex;\n          flex-direction: column;\n          box-shadow: var(--dev-tools-box-shadow);\n          outline: none;\n        }\n\n        .window-toolbar {\n          display: flex;\n          flex: none;\n          align-items: center;\n          padding: 0.375rem;\n          white-space: nowrap;\n          order: 1;\n          background-color: rgba(0, 0, 0, 0.2);\n          gap: 0.5rem;\n        }\n\n        .ahreflike {\n          font-weight: 500;\n          color: var(--dev-tools-text-color-secondary);\n          text-decoration: underline;\n          cursor: pointer;\n        }\n\n        .ahreflike:hover {\n          color: var(--dev-tools-text-color-emphasis);\n        }\n\n        .button {\n          all: initial;\n          font-family: inherit;\n          font-size: var(--dev-tools-font-size-small);\n          line-height: 1;\n          white-space: nowrap;\n          background-color: rgba(0, 0, 0, 0.2);\n          color: inherit;\n          font-weight: 600;\n          padding: 0.25rem 0.375rem;\n          border-radius: 0.25rem;\n        }\n\n        .button:focus,\n        .button:hover {\n          color: var(--dev-tools-text-color-emphasis);\n        }\n\n        .message.information {\n          --dev-tools-notification-color: var(--dev-tools-blue-color);\n        }\n\n        .message.warning {\n          --dev-tools-notification-color: var(--dev-tools-yellow-color);\n        }\n\n        .message.error {\n          --dev-tools-notification-color: var(--dev-tools-red-color);\n        }\n\n        .message {\n          display: flex;\n          padding: 0.1875rem 0.75rem 0.1875rem 2rem;\n          background-clip: padding-box;\n        }\n\n        .message.log {\n          padding-left: 0.75rem;\n        }\n\n        .message-content {\n          margin-right: 0.5rem;\n          -webkit-user-select: text;\n          -moz-user-select: text;\n          user-select: text;\n        }\n\n        .message-heading {\n          position: relative;\n          display: flex;\n          align-items: center;\n          margin: 0.125rem 0;\n        }\n\n        .message.log {\n          color: var(--dev-tools-text-color-secondary);\n        }\n\n        .message:not(.log) .message-heading {\n          font-weight: 500;\n        }\n\n        .message.has-details .message-heading {\n          color: var(--dev-tools-text-color-emphasis);\n          font-weight: 600;\n        }\n\n        .message-heading::before {\n          position: absolute;\n          margin-left: -1.5rem;\n          display: inline-block;\n          text-align: center;\n          font-size: 0.875em;\n          font-weight: 600;\n          line-height: calc(1.25em - 2px);\n          width: 14px;\n          height: 14px;\n          box-sizing: border-box;\n          border: 1px solid transparent;\n          border-radius: 50%;\n        }\n\n        .message.information .message-heading::before {\n          content: 'i';\n          border-color: currentColor;\n          color: var(--dev-tools-notification-color);\n        }\n\n        .message.warning .message-heading::before,\n        .message.error .message-heading::before {\n          content: '!';\n          color: var(--dev-tools-background-color-active);\n          background-color: var(--dev-tools-notification-color);\n        }\n\n        .features-tray {\n          padding: 0.75rem;\n          flex: auto;\n          overflow: auto;\n          animation: fade-in var(--dev-tools-transition-duration) ease-in;\n          user-select: text;\n        }\n\n        .features-tray p {\n          margin-top: 0;\n          color: var(--dev-tools-text-color-secondary);\n        }\n\n        .features-tray .feature {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n          padding-bottom: 0.5em;\n        }\n\n        .message .message-details {\n          font-weight: 400;\n          color: var(--dev-tools-text-color-secondary);\n          margin: 0.25rem 0;\n        }\n\n        .message .message-details[hidden] {\n          display: none;\n        }\n\n        .message .message-details p {\n          display: inline;\n          margin: 0;\n          margin-right: 0.375em;\n          word-break: break-word;\n        }\n\n        .message .persist {\n          color: var(--dev-tools-text-color-secondary);\n          white-space: nowrap;\n          margin: 0.375rem 0;\n          display: flex;\n          align-items: center;\n          position: relative;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          user-select: none;\n        }\n\n        .message .persist::before {\n          content: '';\n          width: 1em;\n          height: 1em;\n          border-radius: 0.2em;\n          margin-right: 0.375em;\n          background-color: rgba(255, 255, 255, 0.3);\n        }\n\n        .message .persist:hover::before {\n          background-color: rgba(255, 255, 255, 0.4);\n        }\n\n        .message .persist.on::before {\n          background-color: rgba(255, 255, 255, 0.9);\n        }\n\n        .message .persist.on::after {\n          content: '';\n          order: -1;\n          position: absolute;\n          width: 0.75em;\n          height: 0.25em;\n          border: 2px solid var(--dev-tools-background-color-active);\n          border-width: 0 0 2px 2px;\n          transform: translate(0.05em, -0.05em) rotate(-45deg) scale(0.8, 0.9);\n        }\n\n        .message .dismiss-message {\n          font-weight: 600;\n          align-self: stretch;\n          display: flex;\n          align-items: center;\n          padding: 0 0.25rem;\n          margin-left: 0.5rem;\n          color: var(--dev-tools-text-color-secondary);\n        }\n\n        .message .dismiss-message:hover {\n          color: var(--dev-tools-text-color);\n        }\n\n        .notification-tray {\n          display: flex;\n          flex-direction: column-reverse;\n          align-items: flex-end;\n          margin: 0.5rem;\n          flex: none;\n        }\n\n        .window.hidden + .notification-tray {\n          margin-bottom: 3rem;\n        }\n\n        .notification-tray .message {\n          pointer-events: auto;\n          background-color: var(--dev-tools-background-color-active);\n          color: var(--dev-tools-text-color);\n          max-width: 30rem;\n          box-sizing: border-box;\n          border-radius: var(--dev-tools-border-radius);\n          margin-top: 0.5rem;\n          transition: var(--dev-tools-transition-duration);\n          transform-origin: bottom right;\n          animation: slideIn var(--dev-tools-transition-duration);\n          box-shadow: var(--dev-tools-box-shadow);\n          padding-top: 0.25rem;\n          padding-bottom: 0.25rem;\n        }\n\n        .notification-tray .message.animate-out {\n          animation: slideOut forwards var(--dev-tools-transition-duration);\n        }\n\n        .notification-tray .message .message-details {\n          max-height: 10em;\n          overflow: hidden;\n        }\n\n        .message-tray {\n          flex: auto;\n          overflow: auto;\n          max-height: 20rem;\n          user-select: text;\n        }\n\n        .message-tray .message {\n          animation: fade-in var(--dev-tools-transition-duration) ease-in;\n          padding-left: 2.25rem;\n        }\n\n        .message-tray .message.warning {\n          background-color: hsla(var(--dev-tools-yellow-hsl), 0.09);\n        }\n\n        .message-tray .message.error {\n          background-color: hsla(var(--dev-tools-red-hsl), 0.09);\n        }\n\n        .message-tray .message.error .message-heading {\n          color: hsl(var(--dev-tools-red-hsl));\n        }\n\n        .message-tray .message.warning .message-heading {\n          color: hsl(var(--dev-tools-yellow-hsl));\n        }\n\n        .message-tray .message + .message {\n          border-top: 1px solid rgba(255, 255, 255, 0.07);\n        }\n\n        .message-tray .dismiss-message,\n        .message-tray .persist {\n          display: none;\n        }\n\n        @keyframes slideIn {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0%);\n            opacity: 1;\n          }\n        }\n\n        @keyframes slideOut {\n          from {\n            transform: translateX(0%);\n            opacity: 1;\n          }\n          to {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n        }\n\n        @keyframes fade-in {\n          0% {\n            opacity: 0;\n          }\n        }\n\n        @keyframes bounce {\n          0% {\n            transform: scale(0.8);\n          }\n          50% {\n            transform: scale(1.5);\n            background-color: hsla(var(--dev-tools-red-hsl), 1);\n          }\n          100% {\n            transform: scale(1);\n          }\n        }\n\n        @supports (backdrop-filter: blur(1px)) {\n          .dev-tools,\n          .window,\n          .notification-tray .message {\n            backdrop-filter: blur(8px);\n          }\n\n          .dev-tools:hover,\n          .dev-tools.active,\n          .window,\n          .notification-tray .message {\n            background-color: var(--dev-tools-background-color-active-blurred);\n          }\n        }\n      `\n    ];\n  }\n\n  static DISMISSED_NOTIFICATIONS_IN_LOCAL_STORAGE = 'vaadin.live-reload.dismissedNotifications';\n  static ACTIVE_KEY_IN_SESSION_STORAGE = 'vaadin.live-reload.active';\n  static TRIGGERED_KEY_IN_SESSION_STORAGE = 'vaadin.live-reload.triggered';\n  static TRIGGERED_COUNT_KEY_IN_SESSION_STORAGE = 'vaadin.live-reload.triggeredCount';\n\n  static AUTO_DEMOTE_NOTIFICATION_DELAY = 5000;\n\n  static HOTSWAP_AGENT = 'HOTSWAP_AGENT';\n  static JREBEL = 'JREBEL';\n  static SPRING_BOOT_DEVTOOLS = 'SPRING_BOOT_DEVTOOLS';\n  static BACKEND_DISPLAY_NAME: Record<string, string> = {\n    HOTSWAP_AGENT: 'HotswapAgent',\n    JREBEL: 'JRebel',\n    SPRING_BOOT_DEVTOOLS: 'Spring Boot Devtools'\n  };\n\n  static get isActive() {\n    const active = window.sessionStorage.getItem(VaadinDevTools.ACTIVE_KEY_IN_SESSION_STORAGE);\n    return active === null || active !== 'false';\n  }\n\n  @property({ type: String, attribute: false })\n  frontendStatus: ConnectionStatus = ConnectionStatus.UNAVAILABLE;\n\n  @property({ type: String, attribute: false })\n  javaStatus: ConnectionStatus = ConnectionStatus.UNAVAILABLE;\n\n  @query('.window')\n  private root!: HTMLElement;\n\n  @state()\n  componentPickActive: boolean = false;\n\n  private javaConnection?: LiveReloadConnection;\n  private frontendConnection?: WebSocketConnection;\n\n  private nextMessageId: number = 1;\n\n  private transitionDuration: number = 0;\n\n  elementTelemetry() {\n    let data = {};\n    try {\n      // localstorage data is collected by vaadin-usage-statistics.js\n      const localStorageStatsString = localStorage.getItem('vaadin.statistics.basket');\n      if (!localStorageStatsString) {\n        // Do not send empty data\n        return;\n      }\n      data = JSON.parse(localStorageStatsString);\n    } catch (e) {\n      // In case of parse errors don't send anything\n      return;\n    }\n\n    if (this.frontendConnection) {\n      this.frontendConnection.send('reportTelemetry', { browserData: data });\n    }\n  }\n\n  openWebSocketConnection() {\n    this.frontendStatus = ConnectionStatus.UNAVAILABLE;\n    this.javaStatus = ConnectionStatus.UNAVAILABLE;\n    if (!this.conf.token) {\n      console.error(\n        'Dev tools functionality denied for this host. See Vaadin documentation on how to configure devmode.hostsAllowed property: https://vaadin.com/docs/latest/configuration/properties#properties'\n      );\n      return;\n    }\n    const onConnectionError = (msg: string) => console.error(msg);\n    const onReload = (strategy: string = 'reload') => {\n      if (strategy === 'refresh' || strategy === 'full-refresh') {\n        const anyVaadin = window.Vaadin as any;\n        // TODO: do it in Flow client. Maybe raise a custom vaadin-refresh-ui event\n        //  and handle it in Flow client?\n        Object.keys(anyVaadin.Flow.clients)\n          .filter((key) => key !== 'TypeScript')\n          .map((id) => anyVaadin.Flow.clients[id])\n          .forEach((client) => {\n            if (client.sendEventMessage) {\n              client.sendEventMessage(1, 'ui-refresh', {\n                fullRefresh: strategy === 'full-refresh'\n              });\n            } else {\n              console.warn('Ignoring ui-refresh event for application ', id);\n            }\n          });\n      } else {\n        const lastReload = window.sessionStorage.getItem(VaadinDevTools.TRIGGERED_COUNT_KEY_IN_SESSION_STORAGE);\n        const nextReload = lastReload ? parseInt(lastReload, 10) + 1 : 1;\n        window.sessionStorage.setItem(VaadinDevTools.TRIGGERED_COUNT_KEY_IN_SESSION_STORAGE, nextReload.toString());\n        window.sessionStorage.setItem(VaadinDevTools.TRIGGERED_KEY_IN_SESSION_STORAGE, 'true');\n        window.location.reload();\n      }\n    };\n    const onUpdate = (path: string, content: string) => {\n      const contextPathProtocol = 'context://';\n      const pathWithNoProtocol = path.substring(contextPathProtocol.length);\n      if (path.startsWith(contextPathProtocol)) {\n        path = this.conf.contextRelativePath + pathWithNoProtocol;\n      }\n\n      if (content) {\n        // change or add a new stylesheet\n        let styleTag = document.head.querySelector(`style[data-file-path='${path}']`) as HTMLStyleElement | null;\n        if (!styleTag) {\n          styleTag = document.createElement('style');\n          styleTag.setAttribute('data-file-path', path);\n          document.head.appendChild(styleTag);\n          this.removeOldLinks(pathWithNoProtocol);\n        }\n        styleTag.textContent = content;\n        document.dispatchEvent(new CustomEvent('vaadin-theme-updated'));\n      } else if (content === '' || content === null) {\n        // remove inlined stylesheets or initial links with the given path\n        const styleTag = document.head.querySelector(`style[data-file-path='${path}']`) as HTMLStyleElement | null;\n        if (styleTag) {\n          styleTag.remove();\n        } else {\n          this.removeOldLinks(pathWithNoProtocol);\n        }\n        document.dispatchEvent(new CustomEvent('vaadin-theme-updated'));\n      }\n    };\n\n    const frontendConnection = new WebSocketConnection(this.getDedicatedWebSocketUrl());\n    frontendConnection.onHandshake = () => {\n      if (!VaadinDevTools.isActive) {\n        frontendConnection.setActive(false);\n      }\n      this.elementTelemetry();\n    };\n    frontendConnection.onConnectionError = onConnectionError;\n    frontendConnection.onReload = onReload;\n    frontendConnection.onUpdate = onUpdate;\n    frontendConnection.onStatusChange = (status: ConnectionStatus) => {\n      this.frontendStatus = status;\n    };\n    frontendConnection.onMessage = (message: any) => this.handleFrontendMessage(message);\n    this.frontendConnection = frontendConnection;\n\n    if (this.conf.backend === VaadinDevTools.SPRING_BOOT_DEVTOOLS && this.conf.liveReloadPort) {\n      this.javaConnection = new LiveReloadConnection(this.getSpringBootWebSocketUrl(window.location));\n      this.javaConnection.onHandshake = () => {\n        if (!VaadinDevTools.isActive) {\n          this.javaConnection!.setActive(false);\n        }\n      };\n      this.javaConnection.onReload = onReload;\n      this.javaConnection.onConnectionError = onConnectionError;\n      this.javaConnection.onStatusChange = (status) => {\n        this.javaStatus = status;\n      };\n    }\n  }\n\n  removeOldLinks(path: string) {\n    // removes initially added links that are outdated after hot-reload and replaced by inlined styles\n    const links = Array.from(document.head.querySelectorAll('link[rel=\"stylesheet\"]')) as HTMLLinkElement[];\n    links.forEach((link) => {\n      let filePath = link.getAttribute('data-file-path') || link.getAttribute('href');\n      if (filePath && filePath.includes(path)) {\n        link.remove();\n      }\n    });\n  }\n\n  tabHandleMessage(tabElement: HTMLElement, message: ServerMessage): boolean {\n    const handler = tabElement as any as MessageHandler;\n    return handler.handleMessage && handler.handleMessage.call(tabElement, message);\n  }\n\n  handleFrontendMessage(message: ServerMessage) {\n    if (message.command === 'featureFlags') {\n    } else if (handleLicenseMessage(message, this.bodyShadowRoot) || this.handleHmrMessage(message)) {\n    } else {\n      this.unhandledMessages.push(message);\n    }\n  }\n\n  handleHmrMessage(message: ServerMessage): boolean {\n    if (message.command !== 'hmr') {\n      return false;\n    }\n    if (hmrClient) {\n      hmrClient.notifyListeners(message.data.event, message.data.eventData);\n    }\n    return true;\n  }\n\n  getDedicatedWebSocketUrl(): string | undefined {\n    function getAbsoluteUrl(relative: string) {\n      // Use innerHTML to obtain an absolute URL\n      const div = document.createElement('div');\n      div.innerHTML = `<a href=\"${relative}\"/>`;\n      return (div.firstChild as HTMLLinkElement).href;\n    }\n\n    if (this.conf.url === undefined) {\n      return undefined;\n    }\n    const connectionBaseUrl = getAbsoluteUrl(this.conf.url!);\n\n    if (!connectionBaseUrl.startsWith('http://') && !connectionBaseUrl.startsWith('https://')) {\n      // eslint-disable-next-line no-console\n      console.error('The protocol of the url should be http or https for live reload to work.');\n      return undefined;\n    }\n    return `${connectionBaseUrl}?v-r=push&debug_window&token=${this.conf.token}`;\n  }\n\n  getSpringBootWebSocketUrl(location: any) {\n    const { hostname } = location;\n    const wsProtocol = location.protocol === 'https:' ? 'wss' : 'ws';\n    if (hostname.endsWith('gitpod.io')) {\n      // Gitpod uses `port-url` instead of `url:port`\n      const hostnameWithoutPort = hostname.replace(/.*?-/, '');\n      return `${wsProtocol}://${this.conf.liveReloadPort}-${hostnameWithoutPort}`;\n    } else {\n      return `${wsProtocol}://${hostname}:${this.conf.liveReloadPort}`;\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.bodyShadowRoot = document.body.attachShadow({ mode: 'closed' });\n    this.bodyShadowRoot.innerHTML = '<slot></slot>';\n\n    this.conf = (window.Vaadin as any).devToolsConf || this.conf;\n\n    const lastReload = window.sessionStorage.getItem(VaadinDevTools.TRIGGERED_KEY_IN_SESSION_STORAGE);\n    if (lastReload) {\n      const now = new Date();\n      const reloaded = `${`0${now.getHours()}`.slice(-2)}:${`0${now.getMinutes()}`.slice(\n        -2\n      )}:${`0${now.getSeconds()}`.slice(-2)}`;\n      window.sessionStorage.removeItem(VaadinDevTools.TRIGGERED_KEY_IN_SESSION_STORAGE);\n    }\n\n    this.transitionDuration = parseInt(\n      window.getComputedStyle(this).getPropertyValue('--dev-tools-transition-duration'),\n      10\n    );\n\n    const windowAny = window as any;\n    windowAny.Vaadin = windowAny.Vaadin || {};\n    windowAny.Vaadin.devTools = Object.assign(this, windowAny.Vaadin.devTools);\n\n    const anyVaadin = window.Vaadin as any;\n    if (anyVaadin.devToolsPlugins) {\n      Array.from(anyVaadin.devToolsPlugins as DevToolsPlugin[]).forEach((plugin) => this.initPlugin(plugin));\n      anyVaadin.devToolsPlugins = { push: (plugin: DevToolsPlugin) => this.initPlugin(plugin) };\n    }\n\n    this.openWebSocketConnection();\n    licenseInit();\n  }\n\n  async initPlugin(plugin: DevToolsPlugin) {\n    const devTools = this;\n    plugin.init({\n      send: function (command: string, data: any): void {\n        devTools.frontendConnection!.send(command, data);\n      }\n    });\n  }\n\n  format(o: any): string {\n    return o.toString();\n  }\n\n  checkLicense(productInfo: Product) {\n    if (this.frontendConnection) {\n      this.frontendConnection.send('checkLicense', productInfo);\n    } else {\n      licenseCheckOk(productInfo);\n    }\n  }\n\n  startPreTrial() {\n    if (this.frontendConnection) {\n      this.frontendConnection.send('startPreTrialLicense', {});\n    } else {\n      console.error('Cannot start pre-trial: no connection');\n      preTrialStartFailed(false, this.bodyShadowRoot);\n    }\n  }\n\n  downloadLicense(productInfo: Product) {\n    if (this.frontendConnection) {\n      this.frontendConnection.send('downloadLicense', productInfo);\n    } else {\n      updateLicenseDownloadStatus('failed', this.bodyShadowRoot);\n    }\n  }\n\n  setActive(yes: boolean) {\n    this.frontendConnection?.setActive(yes);\n    this.javaConnection?.setActive(yes);\n    window.sessionStorage.setItem(VaadinDevTools.ACTIVE_KEY_IN_SESSION_STORAGE, yes ? 'true' : 'false');\n  }\n\n  /* eslint-disable lit/no-template-map */\n  render() {\n    return html` <div style=\"display: none\" class=\"dev-tools\"></div>`;\n  }\n\n  setJavaLiveReloadActive(active: boolean) {\n    // Java reload either goes through the direct connection to live reload, or then through the shared websocket connection\n    if (this.javaConnection) {\n      this.javaConnection.setActive(active);\n    } else {\n      this.frontendConnection?.setActive(active);\n    }\n  }\n}\n"],"names":["__decorate","decorators","target","key","desc","c","d","i","PreTrial","#parentObserver","#shadowRoot","#trialExpired","#startFailed","#licenseDownloadStatus","commonStyles","name","oldValue","newValue","value","expired","originalRemove","currentParent","mutations","mutation","node","_value","maybeParentNode","products","splashScreen","primaryButtonClickListener","event","tryAcquireLicense","startPreTrial","secondaryButtonClickListener","showPreTrialSplashScreen","shadowRoot","message","expiredPreTrial","preTrialElement","productsDiv","preTrialStartFailed","updateLicenseDownloadStatus","action","noLicenseFallbackTimeout","findAll","element","tags","lightDom","shadowDom","e","licenseCheckListener","showNoLicenseFallback","productAndMessage","overlay","defaultSlot","htmlMessage","productTagNames","productChecking","productMissingLicense","productCheckOk","product","checkLicenseIfNeeded","cvdlElement","cvdlName","version","tagName","failedLicenseCheck","licenseCheckOk","data","licenseCheckFailed","productName","licenseCheckNoKey","keyUrl","handleLicenseMessage","bodyShadowRoot","licenseInit","ConnectionStatus","_Connection","_","yes","status","Connection","LiveReloadConnection","url","msg","err","_strategy","json","strategy","WEBSOCKET_FRAGMENT_SIZE","_WebSocketConnection","config","response","waitForPush","atmosphere","_path","_content","_message","command","waitFor","_atmosphere","remaining","WebSocketConnection","check","callback","resolve","_reject","MessageType","hmrClient","VaadinDevTools","_a","LitElement","css","active","VaadinDevTools_1","localStorageStatsString","onConnectionError","onReload","anyVaadin","id","client","lastReload","nextReload","onUpdate","path","content","contextPathProtocol","pathWithNoProtocol","styleTag","frontendConnection","link","filePath","tabElement","handler","getAbsoluteUrl","relative","div","connectionBaseUrl","location","hostname","wsProtocol","hostnameWithoutPort","now","windowAny","plugin","devTools","o","productInfo","html","property","query","state","customElement"],"mappings":"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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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","x_google_ignoreList":[0]}